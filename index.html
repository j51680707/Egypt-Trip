<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸƒåŠæ™‚å…‰æ—…äºº | Egypt Time Traveler</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* è‡ªå®šç¾©æ¨£å¼ */
        .hide-scrollbar::-webkit-scrollbar {
          display: none;
        }
        .pb-safe {
          padding-bottom: env(safe-area-inset-bottom, 20px);
        }
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slide-up {
          from { transform: translateY(20px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        @keyframes fade-in-up {
          from { transform: translateY(10px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        .animate-fade-in { animation: fade-in 0.2s ease-out forwards; }
        .animate-slide-up { animation: slide-up 0.3s ease-out forwards; }
        .animate-fade-in-up { animation: fade-in-up 0.4s ease-out forwards; }
        
        /* Hide scrollbar for Chrome, Safari and Opera */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        /* Hide scrollbar for IE, Edge and Firefox */
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // --- å…§å»ºåœ–ç¤ºå…ƒä»¶ (ç§»é™¤å¤–éƒ¨ä¾è³´ä»¥ç¢ºä¿ç©©å®šæ€§) ---
        // ä½¿ç”¨é€šç”¨ SVG å®šç¾©ï¼Œç¢ºä¿ä¸æœƒæœ‰ forwardRef éŒ¯èª¤
        const IconBase = ({ children, size = 24, className = "" }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {children}
            </svg>
        );

        const Plane = (props) => <IconBase {...props}><path d="M2 12h20"/><path d="M13 2l9 10-9 10"/><path d="M2 12l5-5m-5 5l5 5"/></IconBase>; 
        // ä¿®æ­£é£›æ©Ÿåœ–ç¤ºç‚ºæ›´åƒé£›æ©Ÿçš„å½¢ç‹€
        const PlaneIcon = (props) => <IconBase {...props}><path d="M2 22h20"/><path d="M13 2 9 17"/><path d="M13 2 17 17"/><path d="m13 2-9 10h18z"/><path d="M2 22 13 2 24 22"/></IconBase>; // ç°¡åŒ–ç‰ˆç´™é£›æ©Ÿ/é£›æ©Ÿ
        
        const RealPlane = (props) => <IconBase {...props}><path d="M20.669 13.917c.231-.571.366-1.196.331-1.85-.094-1.722-1.326-3.003-2.92-3.003h-1.956L10.375 2.5H6.5l4.625 6.567H6.5l-2.625-2.5H2l1.5 4.5L2 15.567h1.875l2.625-2.5h4.625L6.5 19.633h3.875l5.749-6.566h1.956c1.235 0 2.261-.758 2.589-1.15z"/></IconBase>;

        // ä½¿ç”¨æ¨™æº– Lucide è·¯å¾‘
        const MapPin = (props) => <IconBase {...props}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></IconBase>;
        const Sun = (props) => <IconBase {...props}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></IconBase>;
        const Calendar = (props) => <IconBase {...props}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></IconBase>;
        const Info = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></IconBase>;
        const X = (props) => <IconBase {...props}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></IconBase>;
        const Utensils = (props) => <IconBase {...props}><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></IconBase>;
        const Camera = (props) => <IconBase {...props}><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></IconBase>;
        const Bus = (props) => <IconBase {...props}><path d="M8 6v6"/><path d="M15 6v6"/><path d="M2 12h19.6"/><path d="M18 21v-2"/><path d="M6 21v-2"/><rect width="20" height="14" x="2" y="5" rx="3"/></IconBase>;
        const Ship = (props) => <IconBase {...props}><path d="M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"/><path d="M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.9 5.8 2.5 8"/><path d="M10 2v4"/><path d="M8 6h4"/><path d="M12 2v4"/></IconBase>;
        const Moon = (props) => <IconBase {...props}><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></IconBase>;
        const ChevronDown = (props) => <IconBase {...props}><path d="m6 9 6 6 6-6"/></IconBase>;
        const ChevronUp = (props) => <IconBase {...props}><path d="m18 15-6-6-6 6"/></IconBase>;
        const MapIcon = (props) => <IconBase {...props}><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21 3 6"/><line x1="9" x2="9" y1="3" y2="18"/><line x1="15" x2="15" y1="6" y2="21"/></IconBase>;
        const List = (props) => <IconBase {...props}><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/></IconBase>;
        const Navigation = (props) => <IconBase {...props}><polygon points="3 11 22 2 13 21 11 13 3 11"/></IconBase>;
        const DollarSign = (props) => <IconBase {...props}><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></IconBase>;
        const Thermometer = (props) => <IconBase {...props}><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/></IconBase>;
        const ImageIcon = (props) => <IconBase {...props}><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></IconBase>;
        const ShoppingBag = (props) => <IconBase {...props}><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></IconBase>;

        // --- Mock Data: è¡Œç¨‹è³‡æ–™ ---
        const itineraryData = [
          {
            day: 1,
            title: "å•Ÿç¨‹ï¼šå°åŒ—å‰å¾€ä¸Šæµ·",
            city: "å°åŒ— -> ä¸Šæµ· (è½‰æ©Ÿ)",
            coords: { lat: 31.2304, lng: 121.4737 }, // Shanghai
            events: [
              { 
                time: "15:00", 
                type: "flight", 
                title: "é£›å¾€æµ¦æ± (MU5008)", 
                desc: "15:00 æ¡ƒåœ’èµ·é£› - 17:05 æŠµé”æµ¦æ±ã€‚", 
                location: "Taoyuan International Airport", 
                detail: "èˆªç­ï¼šæ±æ–¹èˆªç©º MU5008 / æ©Ÿå‹ï¼šA330 / é£›è¡Œæ™‚é–“ï¼š2å°æ™‚5åˆ†ã€‚" 
              },
              { time: "18:30", type: "food", title: "ä¸Šæµ·æ™šé¤ & é»ƒæµ¦æ±ŸéŠè¦½", desc: "å…¥å¢ƒä¸Šæµ·äº«ç”¨ä¸­å¼åˆèœï¼Œä¸¦éŠè¦½é»ƒæµ¦æ±Ÿå¤–ç˜å¤œæ™¯ã€‚", location: "The Bund, Shanghai", detail: "æ„Ÿå—ä¸Šæµ·ç˜çš„ç¹è¯ï¼Œéš¨å¾Œå‰å¾€æ©Ÿå ´æº–å‚™é£›å¾€åŸƒåŠã€‚" },
            ]
          },
          {
            day: 2,
            title: "æŠµé”é–‹ç¾…ï¼šå¤æ–‡æ˜åˆæ¢",
            city: "ä¸Šæµ· -> é–‹ç¾…",
            coords: { lat: 30.0444, lng: 31.2357 }, // Cairo
            events: [
              { 
                time: "01:00", 
                type: "flight", 
                title: "é£›å¾€é–‹ç¾… (MU223)", 
                desc: "01:00 æµ¦æ±èµ·é£› - 07:30 æŠµé”é–‹ç¾…ã€‚", 
                location: "Cairo International Airport", 
                detail: "èˆªç­ï¼šæ±æ–¹èˆªç©º MU223 / æ©Ÿå‹ï¼šA350-900 / é£›è¡Œæ™‚é–“ï¼š12å°æ™‚30åˆ†ã€‚" 
              },
              { time: "09:00", type: "sight", title: "è–©æ‹‰ä¸åŸå ¡ & é˜¿é‡Œæ¸…çœŸå¯º", desc: "çœºæœ›é–‹ç¾…å¸‚æ™¯ï¼Œåƒè§€åª²ç¾è—è‰²æ¸…çœŸå¯ºçš„é˜¿é‡Œæ¸…çœŸå¯ºã€‚", location: "Cairo Citadel", detail: "ç”±è–©æ‹‰ä¸å»ºæ–¼12ä¸–ç´€ï¼Œå…§éƒ¨æœ‰è¯éº—çš„é›ªèŠ±çŸ³è†æ¸…çœŸå¯ºã€‚" },
              { time: "14:00", type: "sight", title: "æ‡¸ç©ºæ•™å ‚", desc: "å»ºæ–¼å¤ç¾…é¦¬å·´æ¯”å€«åŸå ¡ä¹‹ä¸Šçš„æœ€å¤è€æ•™å ‚ã€‚", location: "The Hanging Church", detail: "å…§éƒ¨æ“æœ‰ç²¾ç¾çš„æœ¨é›•èˆ‡è±¡ç‰™ç¥­å£‡ï¼Œæ°£æ°›èŠåš´ã€‚" },
              { time: "18:00", type: "hotel", title: "å…¥ä½é£¯åº—", desc: "Helnan Dream Land æˆ– Hilton Golf æˆ–åŒç´š", location: "Cairo", detail: "å¥½å¥½ä¼‘æ¯ï¼Œèª¿æ•´æ™‚å·®ã€‚" }
            ]
          },
          {
            day: 3,
            title: "è·¨è¶Šæ™‚ç©ºçš„é‡‘å­—å¡”",
            city: "é–‹ç¾… -> äºæ–¯æ–‡",
            coords: { lat: 29.9792, lng: 31.1342 }, // Giza
            events: [
              { time: "09:00", type: "sight", title: "å¤§åŸƒåŠåšç‰©é¤¨ (GEM)", desc: "é è¨ˆ 2025 å¹´æ­£å¼å…¨å€é–‹æ”¾ï¼Œå…¨çƒæœ€å¤§å¤åŸƒåŠåšç‰©é¤¨ã€‚", location: "Grand Egyptian Museum", detail: "ä½æ–¼é‡‘å­—å¡”æ—ï¼Œå±•å‡ºå®Œæ•´çš„åœ–å¦å¡é–€é™ªè‘¬å“ç³»åˆ—ã€‚" },
              { time: "12:00", type: "food", title: "é‡‘å­—å¡”æ™¯è§€åˆé¤", desc: "ä¸€é‚Šç”¨é¤ä¸€é‚Šæ¬£è³å¤è€é‡‘å­—å¡”ã€‚", location: "Giza Plateau", detail: "" },
              { time: "13:30", type: "sight", title: "å‰è–©é‡‘å­—å¡”ç¾¤", desc: "èƒ¡å¤«ã€å¡å¤«æ‹‰ã€å­Ÿå¡æ‹‰é‡‘å­—å¡”èˆ‡äººé¢ç…èº«åƒã€‚", location: "Giza Necropolis", detail: "ç‰¹åˆ¥å®‰æ’ï¼šé¨é§±é§é«”é©—ï¼Œæ¼«æ­¥æ–¼æ²™æ¼ ä¹‹ä¸­ã€‚" },
              { 
                time: "å¾…å®š", 
                type: "flight", 
                title: "åœ‹å…§ç­æ©Ÿå‰å¾€äºæ–¯æ–‡", 
                desc: "æ­ä¹˜åœ‹å…§ç·šç­æ©Ÿé£›å¾€å—éƒ¨å¤§åŸäºæ–¯æ–‡ã€‚", 
                location: "Aswan", 
                detail: "å¯¦éš›èˆªç­æ™‚é–“ä¾ç•¶åœ°èˆªç©ºå…¬å¸å®‰æ’ç‚ºæº–ã€‚" 
              },
              { time: "20:00", type: "hotel", title: "å…¥ä½äºæ–¯æ–‡é£¯åº—", desc: "Tolip Aswan Hotel æˆ–åŒç´š", location: "Tolip Aswan Hotel", detail: "å°¼ç¾…æ²³ç•”çš„äº”æ˜Ÿç´šé£¯åº—ã€‚" }
            ]
          },
          {
            day: 4,
            title: "åŠªæ¯”äºé¢¨æƒ…èˆ‡æšå¸†",
            city: "äºæ–¯æ–‡ (ç™»èˆ¹)",
            coords: { lat: 24.0889, lng: 32.8998 }, // Aswan
            events: [
              { time: "09:00", type: "sight", title: "è²èŠç¥æ®¿", desc: "ä¾›å¥‰æ„›ç¥ä¼Šå¸Œæ–¯ï¼Œæœ‰ã€å°¼ç¾…æ²³æ˜ç ã€ç¾è­½ã€‚", location: "Philae Temple", detail: "æ­ä¹˜æ±½èˆ¹å‰å¾€é˜¿å‰å‹’åŸºäºå³¶åƒè§€ã€‚" },
              { time: "14:00", type: "sight", title: "åŠªæ¯”äºæ‘è½å·¡ç¦®", desc: "é¨é§±é§æ‹œè¨ªè‰²å½©ç¹½ç´›çš„éƒ¨è½ï¼Œäº«ç”¨ç†±æƒ…èŒ¶é»ã€‚", location: "Nubian Village", detail: "é«”é©—åŠªæ¯”äºäººçš„ç†±æƒ…èˆ‡å‚³çµ±ç”Ÿæ´»æ–¹å¼ã€‚" },
              { time: "16:30", type: "sight", title: "é˜¿æ‹‰ä¼¯å¼é¢¨å¸†èˆ¹", desc: "Felucca é»ƒæ˜éŠï¼Œäº«å—å°¼ç¾…æ²³çš„æµªæ¼«æ™‚åˆ»ã€‚", location: "Nile River", detail: "é è‘—è‡ªç„¶é¢¨åŠ›èˆªè¡Œï¼Œå¯§éœè€Œå„ªç¾ã€‚" },
              { time: "18:00", type: "ship", title: "å…¥ä½å°¼ç¾…æ²³éŠè¼ª", desc: "Semeramis 2 æˆ–åŒç´šäº”æ˜ŸéŠè¼ªã€‚", location: "Nile Cruise", detail: "å±•é–‹ç‚ºæœŸå››å¤©ä¸‰å¤œçš„éŠè¼ªä¹‹æ—…ï¼Œå«å…¨åŒ…å¼é¤é£²ã€‚" }
            ]
          },
          {
            day: 5,
            title: "é˜¿å¸ƒè¾›è²çš„ç¥è¹Ÿ",
            city: "äºæ–¯æ–‡ -> åº·å­Ÿæ³¢",
            coords: { lat: 22.3372, lng: 31.6258 }, // Abu Simbel
            events: [
              { time: "04:30", type: "bus", title: "å‰å¾€é˜¿å¸ƒè¾›è²", desc: "æ¸…æ™¨è·Ÿéš¨è»ŠéšŠç©¿è¶Šæ²™æ¼  (å–®ç¨‹ç´„3.5hr)ã€‚", location: "Abu Simbel", detail: "ç‚ºäº†ä¸€ç¹æ‹‰ç¾è¥¿æ–¯äºŒä¸–æœ€å‰å¤§çš„å»ºç¯‰ã€‚" },
              { time: "08:30", type: "sight", title: "é˜¿å¸ƒè¾›è²é›™ç¥æ®¿", desc: "å·¨å¤§çš„å››åº§æ³•è€ååƒï¼Œè¯åˆåœ‹æ¶æ•‘é·ç§»çš„å¥‡è¹Ÿã€‚", location: "Abu Simbel Temples", detail: "åŒ…å«å¤§ç¥æ®¿(æ‹‰ç¾è¥¿æ–¯äºŒä¸–)èˆ‡å°ç¥æ®¿(ç´è²å¡”è‰çš‡å)ã€‚" },
              { time: "16:00", type: "sight", title: "åº·å­Ÿæ³¢é›™ç¥æ®¿", desc: "ä¾›å¥‰é±·é­šç¥èˆ‡è€é·¹ç¥ï¼Œæ“æœ‰ç¨ç‰¹çš„é›™å°ç¨±çµæ§‹ã€‚", location: "Temple of Kom Ombo", detail: "åœ¨æ­¤å¯çœ‹è¦‹å¤åŸƒåŠçš„é†«ç™‚èˆ‡æ‰‹è¡“å™¨å…·æµ®é›•ã€‚" },
              { time: "Night", type: "ship", title: "éŠè¼ªå¾€åŒ—èˆªè¡Œ", desc: "å‰å¾€è‰¾å¾·ç¦ã€‚", location: "Nile River", detail: "äº«å—éŠè¼ªè¨­æ–½èˆ‡æ™šé¤ã€‚" }
            ]
          },
          {
            day: 6,
            title: "çœ¾ç¥ä¹‹é„‰è·¯å…‹ç´¢",
            city: "è‰¾å¾·ç¦ -> è·¯å…‹ç´¢",
            coords: { lat: 25.1297, lng: 32.8712 }, // Edfu
            events: [
              { time: "08:00", type: "sight", title: "è‰¾å¾·ç¦ç¥æ®¿", desc: "æ­ä¹˜é¦¬è»Šå‰å¾€ï¼Œä¿å­˜æœ€å®Œå¥½çš„è·é­¯æ–¯ç¥æ®¿ã€‚", location: "Temple of Edfu", detail: "é«”é©—ç•¶åœ°ç‰¹è‰²äº¤é€šå·¥å…·é¦¬è»Šã€‚" },
              { time: "13:00", type: "sight", title: "ä¼Šæ–¯ç´æ°´é–˜é–€", desc: "è§€è³éŠè¼ªé€šéæ°´é–˜é–€çš„æ°´ä½èª¿ç¯€éç¨‹ã€‚", location: "Esna Lock", detail: "å°è²©æœƒå°‡å•†å“æ‹‹ä¸Šç”²æ¿å«è³£ï¼Œè”šç‚ºå¥‡è§€ã€‚" },
              { time: "19:00", type: "sight", title: "è·¯å…‹ç´¢ç¥æ®¿", desc: "å¤œéŠç¥æ®¿ï¼Œç‡ˆå…‰ä¸‹çš„å¤è¹Ÿæ›´é¡¯ç¥ç§˜ã€‚", location: "Luxor Temple", detail: "ä½æ–¼å¸‚ä¸­å¿ƒï¼Œå¯çœ‹è¦‹æ¸…çœŸå¯ºèˆ‡å¤ç¥æ®¿å…±å­˜çš„ç•«é¢ã€‚" },
              { time: "20:30", type: "ship", title: "é˜¿æ‹‰ä¼¯ä¹‹å¤œ", desc: "éŠè¼ªä¸Šèˆ‰è¾¦è®Šè£æ™šæœƒ (Galabeya Party)ã€‚", location: "Cruise", detail: "å»ºè­°åœ¨å¸‚é›†æˆ–ç¥æ®¿æ—è³¼è²·åŸƒåŠé•·è¢åƒåŠ ã€‚" }
            ]
          },
          {
            day: 7,
            title: "å¸ç‹è°·èˆ‡ç´…æµ·",
            city: "è·¯å…‹ç´¢ -> è™åŠ é”",
            coords: { lat: 25.7402, lng: 32.6014 }, // Valley of Kings
            events: [
              { time: "05:30", type: "optional", title: "(è‡ªè²») ç†±æ°£çƒ", desc: "æ¸…æ™¨å‡ç©ºï¼Œä¿¯ç°å¸ç‹è°·èˆ‡å°¼ç¾…æ²³æ—¥å‡ºã€‚", location: "Luxor West Bank", detail: "ä¸€ç”Ÿä¸€æ¬¡çš„é›£å¾—é«”é©—ã€‚" },
              { time: "09:00", type: "sight", title: "å¸ç‹è°· & æ›¼å„‚å·¨åƒ", desc: "åƒè§€æ–°ç‹åœ‹æ™‚æœŸæ³•è€çš„é™µå¢“ã€‚", location: "Valley of the Kings", detail: "åŒ…å«é€²å…¥ä¸‰åº§é™µå¢“åƒè§€ï¼Œæ¬£è³è‰²å½©ä¾èˆŠé®®è±”çš„å£ç•«ã€‚" },
              { time: "14:00", type: "bus", title: "å‰å¾€ç´…æµ·", desc: "é©…è»Šå‰å¾€æ¸¡å‡å‹åœ°è™åŠ é”ã€‚", location: "Hurghada", detail: "äº«å—å¾æ²™æ¼ åˆ°æµ·æ´‹çš„æ™¯è‰²è½‰æ›ã€‚" },
              { time: "18:00", type: "hotel", title: "å…¥ä½ç´…æµ·æ¸¡å‡æ‘", desc: "Stella Garden Resort æˆ–åŒç´š", location: "Hurghada Resort", detail: "äº«å—å…¨åŒ…å¼æ¸¡å‡æ‘è¨­æ–½ã€‚" }
            ]
          },
          {
            day: 8,
            title: "ç´…æµ·è”šè—å‡æœŸ",
            city: "è™åŠ é” (è‡ªç”±æ´»å‹•)",
            coords: { lat: 27.2579, lng: 33.8116 }, // Hurghada
            events: [
              { time: "All Day", type: "sight", title: "å…¨æ—¥è‡ªç”±æ´»å‹•", desc: "äº«å—é£¯åº—è¨­æ–½æˆ–åƒåŠ è‡ªè²»è¡Œç¨‹ã€‚", location: "Hurghada", detail: "æ¨è–¦è‡ªè²»ï¼šç»ç’ƒåº•èˆ¹ã€æ²™æ¼ å‰æ™®è»Šè¡æ²™ã€ç´…æµ·å‡ºæµ·éŠè‰‡ã€‚" },
              { time: "Optional", type: "optional", title: "(è‡ªè²») ç»ç’ƒåº•èˆ¹", desc: "è¼•é¬†æ¬£è³æµ·åº•çŠç‘šç¤ã€‚", location: "Red Sea", detail: "é©åˆä¸ä¾¿ä¸‹æ°´çš„æ—…å®¢ã€‚" },
              { time: "Optional", type: "optional", title: "(è‡ªè²») æ²™æ¼ è¡æ²™", desc: "å››è¼ªé©…å‹•è»Šæ‹œè¨ªè²éƒ½å› æ‘è½ã€‚", location: "Eastern Desert", detail: "é«”é©—æ»‘æ²™èˆ‡è²éƒ½å› èŒ¶ã€‚" }
            ]
          },
          {
            day: 9,
            title: "è¿”å›é–‹ç¾…èˆ‡å¸‚é›†",
            city: "è™åŠ é” -> é–‹ç¾…",
            coords: { lat: 30.0444, lng: 31.2357 },
            events: [
              { time: "08:00", type: "bus", title: "è¿”å›é–‹ç¾…", desc: "æ²¿è‘—ç´…æµ·æµ·å²¸å…¬è·¯è¿”å›é¦–éƒ½ã€‚", location: "Cairo", detail: "è»Šç¨‹ç´„ 5-6 å°æ™‚ã€‚" },
              { time: "15:00", type: "sight", title: "èè‰ç´™ & é¦™ç²¾æ²¹å·¥å» ", desc: "åƒè§€å¤åŸƒåŠé€ ç´™è¡“èˆ‡å¤©ç„¶é¦™ç²¾è£½ä½œã€‚", location: "Giza", detail: "äº†è§£å¤æ–‡æ˜çš„å·¥è—å‚³æ‰¿ã€‚" },
              { time: "17:00", type: "sight", title: "å“ˆåˆ©åˆ©å¸‚é›†", desc: "æœ€å¤è€çš„å‚³çµ±å¸‚é›†ï¼Œè¿·å®®èˆ¬çš„å··å¼„ã€‚", location: "Khan el-Khalili", detail: "å¿…è²·ï¼šç¥ç‡ˆã€é¦™æ–™ã€ç´€å¿µå“ã€‚è«‹äº«å—æ®ºåƒ¹æ¨‚è¶£ã€‚" },
              { time: "19:00", type: "hotel", title: "å…¥ä½é£¯åº—", desc: "Hilton Grand Nile Tower æˆ–åŒç´š", location: "Cairo", detail: "åœ¨åŸƒåŠçš„æœ€å¾Œä¸€æ™šã€‚" }
            ]
          },
          {
            day: 10,
            title: "å†è¦‹ï¼ŒåŸƒåŠ",
            city: "é–‹ç¾… -> ä¸Šæµ·",
            coords: { lat: 30.1124, lng: 31.4005 }, // Cairo Airport
            events: [
              { time: "09:00", type: "bus", title: "å‰å¾€æ©Ÿå ´", desc: "å¸¶è‘—æ»¿æ»¿å›æ†¶å‰å¾€é–‹ç¾…æ©Ÿå ´ã€‚", location: "Cairo International Airport", detail: "è¾¦ç†ç™»æ©Ÿèˆ‡å‡ºå¢ƒæ‰‹çºŒã€‚" },
              { 
                time: "13:00", 
                type: "flight", 
                title: "é£›å¾€æµ¦æ± (MU224)", 
                desc: "13:00 é–‹ç¾…èµ·é£› - 05:20(+1) æŠµé”æµ¦æ±ã€‚", 
                location: "On Board", 
                detail: "èˆªç­ï¼šæ±æ–¹èˆªç©º MU224 / æ©Ÿå‹ï¼šA350-900 / é£›è¡Œæ™‚é–“ï¼š10å°æ™‚20åˆ†ã€‚" 
              }
            ]
          },
          {
            day: 11,
            title: "ä¸Šæµ·å·¡ç¦®èˆ‡è¿”å®¶",
            city: "ä¸Šæµ· -> å°åŒ—",
            coords: { lat: 31.2304, lng: 121.4737 }, // Shanghai
            events: [
              { time: "05:20", type: "flight", title: "æŠµé”ä¸Šæµ·", desc: "æ¸…æ™¨æŠµé”æµ¦æ±æ©Ÿå ´ï¼Œå…¥å¢ƒè½‰æ©ŸåŠæ—¥éŠã€‚", location: "Pudong Airport", detail: "å…¥å¢ƒä¸­åœ‹é€²è¡Œè½‰æ©ŸåŠæ—¥éŠã€‚" },
              { time: "09:00", type: "sight", title: "è±«åœ’ & æ–°å¤©åœ°", desc: "éŠè¦½ä¸Šæµ·è‘—åæ™¯é»ã€‚", location: "Shanghai", detail: "æ„Ÿå—æµ·æ´¾æ–‡åŒ–èˆ‡çŸ³åº«é–€å»ºç¯‰ã€‚" },
              { time: "13:00", type: "bus", title: "ç£æµ®åˆ—è»Š", desc: "æ­ä¹˜é«˜é€Ÿç£æµ®åˆ—è»Šè¿”å›æ©Ÿå ´ã€‚", location: "Longyang Road Station", detail: "é«”é©—æ™‚é€Ÿ300å…¬é‡Œä»¥ä¸Šçš„å¿«æ„Ÿã€‚" },
              { 
                time: "15:45", 
                type: "flight", 
                title: "é£›å¾€å°åŒ— (MU5005)", 
                desc: "15:45 æµ¦æ±èµ·é£› - 17:40 æŠµé”æ¡ƒåœ’ã€‚", 
                location: "Taoyuan Airport", 
                detail: "èˆªç­ï¼šæ±æ–¹èˆªç©º MU5005 / æ©Ÿå‹ï¼šA330 / é£›è¡Œæ™‚é–“ï¼š1å°æ™‚55åˆ†ã€‚" 
              }
            ]
          }
        ];

        // --- Mock Data: å°ç£äººæ—…éŠæ³¨æ„äº‹é … ---
        const twTips = [
          { icon: <DollarSign size={18} />, title: "å°è²»æ–‡åŒ– (Baksheesh)", text: "åŸƒåŠæ˜¯å°è²»åœ‹å®¶ã€‚ä¸Šå»æ‰€ç´„ 10-20 EGPï¼Œæè¡Œæç´„ 1 USD/æ¬¡ã€‚å»ºè­°å¤šæ›äº› 1 ç¾å…ƒç´™éˆ”æˆ–å°é¡åŸƒéŠã€‚" },
          { icon: <Utensils size={18} />, title: "é£²é£Ÿé£²æ°´", text: "çµ•å°ä¸è¦é£²ç”¨ç”Ÿæ°´(å«æ¼±å£)ï¼Œè«‹å–ç“¶è£æ°´ã€‚ç”Ÿèœæ²™æ‹‰å»ºè­°å°‘åƒï¼Œä»¥å…è…¸èƒƒä¸é©ã€‚å»ºè­°è‡ªå‚™è…¸èƒƒè—¥ã€‚" },
          { icon: <Sun size={18} />, title: "æ°£å€™ç©¿è‘—", text: "æ—©æ™šæº«å·®å¤§ï¼Œæ²™æ¼ æ°£å€™ä¹¾ç‡¥ã€‚è«‹æ´‹è”¥å¼ç©¿æ­ï¼Œä¸¦æ”œå¸¶å¸½å­ã€å¢¨é¡ã€é«˜ä¿‚æ•¸é˜²æ›¬ä¹³ã€‚åƒè§€æ¸…çœŸå¯ºå¥³æ€§éœ€åŒ…é ­å·¾ã€‚" },
          { icon: <Info size={18} />, title: "è³¼ç‰©æ®ºåƒ¹", text: "åœ¨è§€å…‰å€(å¦‚å¸‚é›†)è³¼ç‰©ï¼Œè«‹å¾é–‹åƒ¹çš„ 3-5 æŠ˜é–‹å§‹æ®ºåƒ¹ã€‚å …æŒåº•ç·šï¼Œæ…‹åº¦å‹å–„ä½†å …å®šã€‚" },
          { icon: <Plane size={18} />, title: "ç°½è­‰", text: "å°ç£è­·ç…§æŒæœ‰äººå¯æ–¼æŠµé”åŸƒåŠæ©Ÿå ´æ™‚è¾¦ç†è½åœ°ç°½è­‰ (25 USD)ã€‚" },
        ];

        // --- Mock Data: ä¼´æ‰‹ç¦®è³‡æ–™ ---
        const souvenirData = [
          {
            id: 1,
            name: "ç´™èè‰ç•« (Papyrus Paintings)",
            desc: "åŸƒåŠæœ€ç¶“å…¸çš„ç´€å¿µå“ä¹‹ä¸€ã€‚é€™äº›ç•«ä½œç¹ªè£½åœ¨ä¸€ç¨®ç”±ç´™èè‰æ¤ç‰©è£½æˆçš„ç‰¹æ®Šç´™å¼µä¸Šï¼Œå…§å®¹é€šå¸¸æ˜¯å¤åŸƒåŠçš„ç¥è©±æ•…äº‹ã€æ³•è€å’Œæ—¥å¸¸ç”Ÿæ´»å ´æ™¯ã€‚",
            image: "Papyrus Paintings.png",
            tips: "è¾¨åˆ¥çœŸå½ï¼šçœŸèè‰ç´™å¼·éŸŒä¸æ˜“æŠ˜æ–·ï¼Œå°è‘—å…‰çœ‹æœ‰ç¸±æ©«äº¤éŒ¯çš„ç´‹è·¯ï¼›å‡çš„å¤šç”¨èŠ­è•‰è‘‰è£½æˆï¼Œæ˜“è„†è£‚ã€‚"
          },
          {
            id: 2,
            name: "é¦™ç²¾æ²¹ (Perfume Oils)",
            desc: "åŸƒåŠçš„é¦™æ°´æ­·å²æ‚ ä¹…ï¼Œæ˜¯è¨±å¤šç¾ä»£é¦™æ°´çš„ç™¼æºåœ°ã€‚åœ¨ç•¶åœ°çš„å¸‚é›†ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°å„ç¨®å¤©ç„¶é¦™ç²¾æ²¹ï¼Œé€šå¸¸è£åœ¨ç²¾ç¾çš„ç»ç’ƒç“¶ä¸­ï¼Œæ˜¯è‡ªç”¨æˆ–é€ç¦®çš„çµ•ä½³é¸æ“‡ã€‚",
            image: "Perfume Oils.png",
            tips: "åŸƒåŠé¦™ç²¾é€šå¸¸ä¸å«é…’ç²¾ï¼Œç•™é¦™æ™‚é–“é•·ã€‚çŸ¥åé¦™å‘³å¦‚ã€è“®èŠ±ã€ã€ã€ç´™èè‰ã€æˆ–æ··åˆèŠ±é¦™çš„ã€æ²™æ¼ çš„ç§˜å¯†ã€ã€‚"
          },
          {
            id: 3,
            name: "é›ªèŠ±çŸ³è†å·¥è—å“ (Alabaster Crafts)",
            desc: "é›ªèŠ±çŸ³è†æ˜¯ä¸€ç¨®åŠé€æ˜çš„ç¤¦ç‰©ï¼Œå¸¸è¢«ç”¨æ–¼è£½ä½œèŠ±ç“¶ã€ç‡ˆå…·å’Œé›•åƒã€‚åœ¨ç›§å…‹ç´¢ç­‰åœ°çš„å·¥åŠï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å·¥åŒ è¦ªæ‰‹é›•åˆ»é€™äº›ç¾éº—çš„è—è¡“å“ï¼Œå®ƒå€‘åœ¨å…‰ç·šä¸‹æœƒæ•£ç™¼å‡ºæŸ”å’Œçš„å…‰èŠ’ã€‚",
            image: "Alabaster Crafts.png",
            tips: "å„ªè³ªé›ªèŠ±çŸ³è†é€å…‰æ€§ä½³ã€‚åˆ†è¾¨æ‰‹å·¥èˆ‡æ©Ÿå™¨è£½å“ï¼šæ‰‹å·¥è£½å“è¡¨é¢è¼ƒä¸å¹³æ»‘ï¼Œè§¸æ„Ÿæº«æ½¤ï¼Œæ©Ÿå™¨è£½å“å‰‡éæ–¼å®Œç¾å…‰æ»‘ã€‚"
          },
          {
            id: 4,
            name: "åŸƒåŠæ£‰è£½å“ (Egyptian Cotton Products)",
            desc: "åŸƒåŠæ£‰ä»¥å…¶è¶…å‡¡çš„æŸ”è»Ÿåº¦å’Œè€ç”¨æ€§èåæ–¼ä¸–ã€‚æ‚¨å¯ä»¥è³¼è²·åˆ°é«˜å“è³ªçš„åºŠå–®ã€æ¯›å·¾ã€æµ´è¢ç­‰ç´¡ç¹”å“ï¼Œå°‡é€™ä»½å¥¢è¯çš„è§¸æ„Ÿå¸¶å›å®¶ã€‚",
            image: "Egyptian Cotton Products.png",
            tips: "è«‹èªæ˜ã€Egyptian Cottonã€èªè­‰æ¨™èªŒã€‚è§¸æ‘¸æ™‚æ‰‹æ„Ÿæ‡‰æŸ”è»Ÿåšå¯¦ï¼Œéä¸€èˆ¬æ£‰è³ªå¯æ¯”æ“¬ã€‚"
          },
          {
            id: 5,
            name: "å‚³çµ±éŠ…è£½å“ (Traditional Copperware)",
            desc: "åœ¨é–‹ç¾…çš„è€åŸå€ï¼Œæ‚¨æœƒç™¼ç¾è¨±å¤šæ‰‹å·¥æ•²è£½çš„éŠ…è£½å“ï¼Œå¦‚æ‰˜ç›¤ã€èŒ¶å…·å’Œç‡ˆå…·ã€‚é€™äº›éŠ…å™¨ä¸Šé€šå¸¸æœ‰ç²¾ç¾çš„å¹¾ä½•åœ–æ¡ˆå’Œé˜¿æ‹‰ä¼¯æ›¸æ³•ï¼Œå±•ç¾äº†åŸƒåŠå‚³çµ±å·¥è—çš„ç²¾æ¹›æŠ€è—ã€‚",
            image: "Traditional Copperware.png",
            tips: "é¸è³¼æ™‚å¯è§€å¯Ÿæ•²æ‰“çš„ç—•è·¡ï¼Œæ‰‹å·¥è£½å“ç´‹è·¯æ·±æ·ºä¸ä¸€ï¼Œæ›´å…·æ‰‹ä½œæº«åº¦èˆ‡ç¨ç‰¹æ€§ã€‚"
          },
          {
            id: 6,
            name: "æ¤°æ£— (Dates)",
            desc: "æ²™æ¼ ä¸­çš„éºµåŒ…ï¼Œç‡Ÿé¤Šè±å¯Œï¼Œå£æ„Ÿè»Ÿç³¯é¦™ç”œã€‚åŸƒåŠæ˜¯ä¸–ç•Œä¸»è¦æ¤°æ£—ç”¢åœ°ä¹‹ä¸€ï¼Œæœ‰ä¹¾ç‡¥ã€åŠä¹¾ç‡¥ç­‰å¤šç¨®å“ç¨®ï¼Œæ˜¯é…èŒ¶çš„æœ€ä½³è‰¯ä¼´ã€‚",
            image: "Dates.png",
            tips: "å»ºè­°è³¼è²·åŒ…è£å®Œæ•´çš„å“ç‰Œæ¤°æ£—è¼ƒè¡›ç”Ÿï¼Œæˆ–åœ¨ä¹¾è²¨åº—è©¦åƒå¾Œè³¼è²·ã€‚åŒ…æä»æˆ–æ ¸æ¡ƒçš„å¤¾å¿ƒæ¤°æ£—æ˜¯äººæ°£é¦–é¸ã€‚"
          },
          {
            id: 7,
            name: "æ´›ç¥èŠ±èŒ¶ (Hibiscus/Karkade)",
            desc: "åŸƒåŠåœ‹æ°‘é£²æ–™ï¼Œå†·ç†±çš†å®œã€‚å¯Œå«ç¶­ç”Ÿç´ Cï¼Œè‰²æ¾¤ç´…æ½¤ï¼Œå£æ„Ÿé…¸ç”œï¼Œå…·æœ‰é™è¡€å£“å’Œæ¶ˆæš‘çš„åŠŸæ•ˆï¼Œåœ¨ç‚ç†±çš„åŸƒåŠå–ä¸Šä¸€æ¯æ ¼å¤–æ¸…çˆ½ã€‚",
            image: "Karkade.png",
            tips: "äºæ–¯æ–‡ (Aswan) çš„æ´›ç¥èŠ±å“è³ªè¢«å…¬èªæœ€å¥½ã€‚æŒ‘é¸æ™‚é¸æ“‡èŠ±æœµå®Œæ•´ã€é¡è‰²æ·±ç´…åç´«çš„ï¼Œé¦™æ°£è¼ƒæ¿ƒéƒã€‚"
          }
        ];

        // --- Sub-components ---

        const IconWrapper = ({ type }) => {
          const baseClass = "p-2 rounded-full text-white shadow-md";
          switch (type) {
            case 'flight': return <div className={`${baseClass} bg-blue-500`}><Plane size={20} /></div>;
            case 'food': return <div className={`${baseClass} bg-orange-500`}><Utensils size={20} /></div>;
            case 'sight': return <div className={`${baseClass} bg-yellow-600`}><Camera size={20} /></div>;
            case 'hotel': return <div className={`${baseClass} bg-indigo-500`}><Moon size={20} /></div>;
            case 'bus': return <div className={`${baseClass} bg-green-600`}><Bus size={20} /></div>;
            case 'ship': return <div className={`${baseClass} bg-cyan-600`}><Ship size={20} /></div>;
            case 'optional': return <div className={`${baseClass} bg-purple-500`}><DollarSign size={20} /></div>;
            default: return <div className={`${baseClass} bg-gray-500`}><MapPin size={20} /></div>;
          }
        };

        const Modal = ({ isOpen, onClose, data }) => {
          if (!isOpen || !data) return null;

          return (
            <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70 backdrop-blur-sm animate-fade-in">
              <div className="bg-white w-full max-w-md rounded-2xl overflow-hidden shadow-2xl relative animate-slide-up">
                {/* Header Image Placeholder */}
                <div className="h-32 bg-gradient-to-r from-yellow-600 to-yellow-800 flex items-center justify-center relative">
                  <h3 className="text-white text-2xl font-bold px-4 text-center drop-shadow-md">{data.title}</h3>
                  <button 
                    onClick={onClose}
                    className="absolute top-3 right-3 bg-white/20 hover:bg-white/40 rounded-full p-1 text-white transition-colors"
                  >
                    <X size={24} />
                  </button>
                </div>

                {/* Content */}
                <div className="p-6 space-y-4">
                  <div className="flex items-center text-gray-600 mb-2">
                    <span className="font-mono bg-gray-100 px-2 py-1 rounded text-sm font-bold mr-3">{data.time}</span>
                    <span className="text-sm border border-gray-300 px-2 py-0.5 rounded-full">{data.type.toUpperCase()}</span>
                  </div>
                  
                  <p className="text-gray-700 leading-relaxed">
                    {data.desc}
                  </p>

                  <div className="bg-yellow-50 p-4 rounded-lg border border-yellow-100">
                    <h4 className="text-yellow-800 font-bold mb-2 flex items-center">
                      <Info size={16} className="mr-2" /> è©³ç´°è³‡è¨Š
                    </h4>
                    <p className="text-sm text-gray-700">{data.detail || "æš«ç„¡è©³ç´°è³‡è¨Šã€‚"}</p>
                  </div>

                  <a 
                    href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(data.location)}`}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="block w-full text-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all shadow-lg active:scale-95 flex items-center justify-center gap-2"
                  >
                    <Navigation size={18} />
                    é–‹å•Ÿ Google Maps å°èˆª
                  </a>
                </div>
              </div>
            </div>
          );
        };

        const TipsModal = ({ isOpen, onClose }) => {
          if (!isOpen) return null;
          return (
            <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in">
              <div className="bg-white w-full max-w-lg rounded-2xl overflow-hidden shadow-2xl relative max-h-[80vh] flex flex-col">
                <div className="bg-teal-700 p-4 flex justify-between items-center sticky top-0 z-10">
                  <h3 className="text-white text-lg font-bold flex items-center gap-2">
                    <span className="text-xl">ğŸ‡¹ğŸ‡¼</span> å°ç£æ—…å®¢åŸƒåŠæ•™æˆ°å®ˆå‰‡
                  </h3>
                  <button onClick={onClose} className="text-white/80 hover:text-white"><X size={24}/></button>
                </div>
                <div className="p-5 overflow-y-auto space-y-4">
                  {twTips.map((tip, idx) => (
                    <div key={idx} className="flex gap-4 p-3 border-b border-gray-100 last:border-0">
                      <div className="text-teal-600 mt-1 shrink-0">{tip.icon}</div>
                      <div>
                        <h4 className="font-bold text-gray-800">{tip.title}</h4>
                        <p className="text-sm text-gray-600 mt-1 leading-relaxed">{tip.text}</p>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          );
        };

        // --- Main Component ---

        function EgyptApp() {
          const [activeTab, setActiveTab] = useState('timeline'); // 'timeline' or 'map' or 'illustrations' or 'souvenirs'
          const [currentDay, setCurrentDay] = useState(1);
          const [isHeroOpen, setIsHeroOpen] = useState(true);
          const [weather, setWeather] = useState({ temp: '--', condition: 'Loading...' });
          const [rate, setRate] = useState('Loading...');
          const [modalData, setModalData] = useState(null);
          const [isTipsOpen, setIsTipsOpen] = useState(false);
          
          // Refs for scrolling
          const timelineRef = useRef(null);

          // Simulated API Calls
          useEffect(() => {
            // Mock Weather API
            const timer = setTimeout(() => {
              setWeather({ temp: '32Â°C', condition: 'æ™´æœ—ä¹¾ç‡¥' });
              setRate('1 EGP â‰ˆ 0.65 TWD');
            }, 1000);
            return () => clearTimeout(timer);
          }, []);

          const handleCardClick = (event) => {
            setModalData(event);
          };

          const handleMapMarkerClick = (day) => {
            setCurrentDay(day);
            setActiveTab('timeline');
            // Simple logic to scroll to top when switching
            if (timelineRef.current) timelineRef.current.scrollTop = 0;
          };

          const currentItinerary = itineraryData.find(d => d.day === currentDay);

          // --- Render Functions ---

          const renderTimeline = () => (
            <div className="pb-24 pt-2 px-2" ref={timelineRef}>
              {/* Day Selector Strip */}
              <div className="flex overflow-x-auto py-3 gap-2 px-2 mb-2 no-scrollbar snap-x">
                {itineraryData.map((d) => (
                  <button
                    key={d.day}
                    onClick={() => setCurrentDay(d.day)}
                    className={`snap-center shrink-0 px-4 py-2 rounded-full text-sm font-bold transition-all shadow-sm
                      ${currentDay === d.day 
                        ? 'bg-yellow-600 text-white scale-105 ring-2 ring-yellow-300' 
                        : 'bg-white text-gray-500 border border-gray-200'}`}
                  >
                    Day {d.day}
                  </button>
                ))}
              </div>

              {/* Day Header */}
              <div className="bg-white rounded-xl p-4 shadow-sm mb-6 border-l-4 border-yellow-500 mx-2">
                <h2 className="text-2xl font-bold text-gray-800">Day {currentDay}</h2>
                <p className="text-gray-500 font-medium">{currentItinerary.title}</p>
                <div className="flex items-center text-xs text-gray-400 mt-2">
                  <MapPin size={12} className="mr-1" />
                  {currentItinerary.city}
                </div>
              </div>

              {/* Vertical Timeline */}
              <div className="relative pl-4 pr-2 space-y-8">
                {/* Vertical Line */}
                <div className="absolute left-[27px] top-2 bottom-0 w-0.5 bg-gray-200 -z-10"></div>

                {currentItinerary.events.map((event, index) => (
                  <div 
                    key={index} 
                    className="relative flex items-start gap-4 animate-fade-in-up"
                    style={{ animationDelay: `${index * 100}ms` }}
                    onClick={() => handleCardClick(event)}
                  >
                    {/* Time Column */}
                    <div className="flex flex-col items-center min-w-[50px] pt-1 bg-gray-50/80 backdrop-blur rounded p-1 z-0">
                      <span className="text-xs font-bold text-gray-800">{event.time}</span>
                    </div>

                    {/* Icon Node */}
                    <div className="absolute left-[17px] top-1 z-10 bg-gray-50 rounded-full p-1 border border-white">
                      <IconWrapper type={event.type} />
                    </div>

                    {/* Card */}
                    <div className="flex-1 bg-white rounded-xl p-4 shadow-md border border-gray-100 active:scale-[0.98] transition-transform cursor-pointer hover:shadow-lg ml-3">
                      <div className="flex justify-between items-start">
                        <h3 className="font-bold text-gray-800 text-lg leading-tight">{event.title}</h3>
                      </div>
                      <p className="text-gray-500 text-sm mt-1 line-clamp-2">{event.desc}</p>
                      
                      {/* Chips */}
                      <div className="flex gap-2 mt-3">
                        {event.location && (
                          <span className="text-[10px] bg-blue-50 text-blue-600 px-2 py-1 rounded-full flex items-center">
                            <MapPin size={10} className="mr-1" /> {event.location}
                          </span>
                        )}
                        <span className="text-[10px] bg-gray-100 text-gray-500 px-2 py-1 rounded-full">
                          é»æ“Šè©³æƒ…
                        </span>
                      </div>
                    </div>
                  </div>
                ))}
                
                {/* End of Day Marker */}
                <div className="flex items-center gap-4 pt-4">
                   <div className="w-[50px] flex justify-center">
                     <div className="w-3 h-3 bg-gray-300 rounded-full"></div>
                   </div>
                   <div className="text-gray-400 text-sm italic">End of Day {currentDay}</div>
                </div>
              </div>
            </div>
          );

          const renderSchematicMap = () => (
            <div className="h-full bg-[#fcf9f2] flex flex-col">
               {/* Google Map Iframe */}
               <div className="w-full h-1/2 bg-gray-200 relative">
                  <iframe 
                    width="100%" 
                    height="100%" 
                    frameBorder="0" 
                    scrolling="no" 
                    marginHeight="0" 
                    marginWidth="0" 
                    src={`https://maps.google.com/maps?q=${currentItinerary.coords.lat},${currentItinerary.coords.lng}&hl=zh-TW&z=10&output=embed`}
                    title="Google Map"
                  ></iframe>
                  <div className="absolute bottom-2 right-2 bg-white/90 px-2 py-1 text-xs rounded shadow">
                    {currentItinerary.city}
                  </div>
               </div>

               {/* Schematic List */}
               <div className="flex-1 overflow-y-auto p-6 pb-24">
                  <h2 className="text-xl font-bold text-gray-800 mb-4">è¡Œç¨‹åœ°åœ–å°è¦½</h2>
                  <div className="relative border-l-2 border-yellow-400 ml-4 space-y-8">
                    {itineraryData.map((day) => (
                       <div 
                         key={day.day} 
                         className={`relative pl-6 cursor-pointer group transition-all ${currentDay === day.day ? 'opacity-100 scale-105' : 'opacity-60 hover:opacity-100'}`}
                         onClick={() => setCurrentDay(day.day)}
                       >
                         {/* Dot */}
                         <div className={`absolute -left-[9px] top-1 w-4 h-4 rounded-full border-2 border-white shadow ${currentDay === day.day ? 'bg-blue-600 scale-125' : 'bg-yellow-500'}`}></div>
                         
                         {/* Content */}
                         <div>
                           <span className="text-xs font-bold text-yellow-600 uppercase">Day {day.day}</span>
                           <h3 className="font-bold text-gray-800">{day.city.split('->')[0]}</h3>
                           <p className="text-xs text-gray-500 truncate">{day.title}</p>
                         </div>
                         
                         {/* Jump Button (only visible if active) */}
                         {currentDay === day.day && (
                           <button 
                             onClick={(e) => {
                               e.stopPropagation();
                               handleMapMarkerClick(day.day);
                             }}
                             className="mt-2 text-xs bg-blue-600 text-white px-3 py-1 rounded-full flex items-center gap-1 shadow-sm hover:bg-blue-700"
                           >
                             æŸ¥çœ‹è¡Œç¨‹ <List size={12} />
                           </button>
                         )}
                       </div>
                    ))}
                  </div>
               </div>
            </div>
          );

          const renderIllustrations = () => (
            <div className="h-full bg-[#fcf9f2] pb-24 overflow-y-auto">
              <div className="p-4 space-y-6">
                <h2 className="text-2xl font-bold text-gray-800 mb-4 px-2">è¡Œç¨‹æ‰‹ç¹ªæ’åœ–</h2>
                
                {/* Day 2-10 Map Illustration */}
                <div className="bg-white p-2 rounded-xl shadow-md overflow-hidden">
                   <h3 className="text-lg font-bold text-yellow-600 mb-2 px-2 flex items-center gap-2">
                     <Calendar size={20} />
                     æ‰‹ç¹ªè¡Œç¨‹åœ°åœ– (Day 2-10)
                   </h3>
                   <img 
                     src="Egypt_Day_02-10_Map.png" 
                     alt="æ‰‹ç¹ªè¡Œç¨‹åœ°åœ– (Day 2-10)" 
                     className="w-full h-auto rounded-lg object-contain bg-gray-100 min-h-[200px]"
                     onError={(e) => {
                       e.target.onerror = null; 
                       e.target.src='https://placehold.co/600x800/fcf9f2/333?text=Image+Not+Found%0A(Egypt_Day_02-10_Map.png)';
                     }}
                   />
                </div>

                {/* Day 1-6 Illustration */}
                <div className="bg-white p-2 rounded-xl shadow-md overflow-hidden">
                   <h3 className="text-lg font-bold text-yellow-600 mb-2 px-2 flex items-center gap-2">
                     <Calendar size={20} />
                     ä¸Šç¯‡ï¼šDay 1-6
                   </h3>
                   <img 
                     src="Egypt_Day_01-06.png" 
                     alt="Egypt Itinerary Day 1-6 Illustration" 
                     className="w-full h-auto rounded-lg object-contain bg-gray-100 min-h-[200px]"
                     onError={(e) => {
                       e.target.onerror = null; 
                       e.target.src='https://placehold.co/600x800/fcf9f2/333?text=Image+Not+Found%0A(Egypt_Day_01-06.png)';
                     }}
                   />
                </div>

                {/* Day 7-11 Illustration */}
                <div className="bg-white p-2 rounded-xl shadow-md overflow-hidden">
                   <h3 className="text-lg font-bold text-yellow-600 mb-2 px-2 flex items-center gap-2">
                     <Calendar size={20} />
                     ä¸‹ç¯‡ï¼šDay 7-11
                   </h3>
                   <img 
                     src="Egypt_Day_07-11.png" 
                     alt="Egypt Itinerary Day 7-11 Illustration" 
                     className="w-full h-auto rounded-lg object-contain bg-gray-100 min-h-[200px]"
                     onError={(e) => {
                       e.target.onerror = null; 
                       e.target.src='https://placehold.co/600x800/fcf9f2/333?text=Image+Not+Found%0A(Egypt_Day_07-11.png)';
                     }}
                   />
                </div>

                <p className="text-center text-gray-400 text-sm italic">
                   * åœ–ç‰‡åƒ…ä¾›åƒè€ƒï¼Œå¯¦éš›è¡Œç¨‹è«‹ä»¥æ–‡å­—èªªæ˜ç‚ºæº–
                </p>
              </div>
            </div>
          );

          const renderSouvenirs = () => (
            <div className="h-full bg-[#fcf9f2] pb-24 overflow-y-auto">
              <div className="p-4 space-y-6">
                <h2 className="text-2xl font-bold text-gray-800 mb-2 px-2">åŸƒåŠå¿…è²·ä¼´æ‰‹ç¦®</h2>
                <p className="text-sm text-gray-500 px-2 mb-4">æŠŠåƒå¹´æ–‡æ˜çš„å›æ†¶å¸¶å›å®¶</p>
                
                <div className="grid grid-cols-1 gap-4">
                  {souvenirData.map((item) => (
                    <div key={item.id} className="bg-white rounded-xl shadow-md overflow-hidden flex flex-col">
                      <div className="h-40 w-full bg-gray-200 relative">
                         <img 
                            src={item.image} 
                            alt={item.name}
                            className="w-full h-full object-cover"
                            onError={(e) => {
                               e.target.onerror = null; 
                               e.target.src='https://placehold.co/600x400/f3f4f6/9ca3af?text=' + encodeURIComponent(item.name);
                            }}
                         />
                         <div className="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-3">
                           <h3 className="text-white font-bold text-lg">{item.name}</h3>
                         </div>
                      </div>
                      <div className="p-4">
                        <p className="text-gray-700 text-sm mb-3 leading-relaxed">{item.desc}</p>
                        <div className="bg-yellow-50 p-2 rounded border border-yellow-100 flex items-start gap-2">
                           <Info size={14} className="text-yellow-600 mt-1 shrink-0" />
                           <p className="text-xs text-yellow-800">{item.tips}</p>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          );

          return (
            <div className="max-w-md mx-auto h-screen bg-gray-50 flex flex-col relative font-sans text-gray-900 overflow-hidden border-x border-gray-200 shadow-2xl">
              
              {/* 1. Hero Section - Collapsible Drawer Style */}
              <div 
                className={`bg-slate-900 bg-cover bg-center text-white transition-all duration-300 ease-in-out z-20 shadow-md flex flex-col shrink-0 ${isHeroOpen ? 'max-h-80' : 'max-h-[84px]'}`}
                style={{ backgroundImage: `url('Egypt_Banner.png')` }}
              >
                <div className="bg-black/40 w-full h-full flex flex-col">
                  <div className="p-4 flex-1 overflow-hidden">
                    <div className="flex justify-between items-center">
                      <div className="flex items-center gap-2">
                         <span className="bg-yellow-500 text-xs font-bold px-2 py-0.5 rounded text-black">EGYPT</span>
                         <h1 className="font-bold text-lg tracking-wide drop-shadow-md">å°¼ç¾…æ²³å‚³èªª {itineraryData.length} æ—¥éŠ</h1>
                      </div>
                      <div className="flex gap-3">
                         <button onClick={() => setIsTipsOpen(true)} className="bg-black/30 backdrop-blur-sm p-2 rounded-full hover:bg-black/50 transition-colors border border-white/20">
                            <span className="text-sm font-bold">ğŸ‡¹ğŸ‡¼ TIPS</span>
                         </button>
                      </div>
                    </div>

                    {/* Collapsible Content */}
                    <div className={`mt-4 space-y-4 transition-opacity duration-300 ${isHeroOpen ? 'opacity-100' : 'opacity-0'}`}>
                      <div className="grid grid-cols-2 gap-3">
                        <div className="bg-black/40 rounded-lg p-3 backdrop-blur-sm border border-white/10">
                          <div className="flex items-center text-yellow-400 mb-1">
                            <Sun size={16} className="mr-1" />
                            <span className="text-xs font-bold">ç›®å‰å¤©æ°£</span>
                          </div>
                          <div className="text-2xl font-bold">{weather.temp}</div>
                          <div className="text-xs text-gray-300">{weather.condition}</div>
                        </div>
                        <div className="bg-black/40 rounded-lg p-3 backdrop-blur-sm border border-white/10">
                          <div className="flex items-center text-green-400 mb-1">
                            <DollarSign size={16} className="mr-1" />
                            <span className="text-xs font-bold">åƒè€ƒåŒ¯ç‡</span>
                          </div>
                          <div className="text-sm font-medium mt-1">{rate}</div>
                          <div className="text-[10px] text-gray-400 mt-1">è«‹æº–å‚™å°é¡ç¾é‡‘</div>
                        </div>
                      </div>
                      
                      <div className="flex items-center text-xs text-gray-300 bg-black/30 w-fit px-2 py-1 rounded backdrop-blur-sm">
                         <MapPin size={12} className="mr-1" /> 
                         <span>ç¾åœ¨ä½ç½®: {activeTab === 'timeline' ? itineraryData[currentDay-1].city : 'å…¨è¦½æ¨¡å¼'}</span>
                      </div>
                    </div>
                  </div>

                  {/* Toggle Handle Bar */}
                  <button 
                     onClick={() => setIsHeroOpen(!isHeroOpen)}
                     className="h-6 w-full flex items-center justify-center bg-black/40 hover:bg-black/60 transition-colors cursor-pointer active:bg-black/70 border-t border-white/10 backdrop-blur-sm"
                  >
                     {isHeroOpen ? <ChevronUp size={16} className="text-white/80" /> : <ChevronDown size={16} className="text-white/80" />}
                  </button>
                </div>
              </div>

              {/* Main Content Area */}
              <div className="flex-1 overflow-y-auto bg-gray-50 relative scroll-smooth">
                {activeTab === 'timeline' ? renderTimeline() : 
                 activeTab === 'map' ? renderSchematicMap() : 
                 activeTab === 'illustrations' ? renderIllustrations() :
                 renderSouvenirs()}
              </div>

              {/* 3. Bottom Navigation */}
              <div className="absolute bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-2 py-3 flex justify-around items-center z-30 pb-safe">
                <button 
                  onClick={() => setActiveTab('timeline')}
                  className={`flex flex-col items-center gap-1 w-16 transition-colors ${activeTab === 'timeline' ? 'text-yellow-600' : 'text-gray-400'}`}
                >
                  <List size={22} />
                  <span className="text-[10px] font-bold">æ¯æ—¥è¡Œç¨‹</span>
                </button>
                
                <button 
                  onClick={() => setActiveTab('illustrations')}
                  className={`flex flex-col items-center gap-1 w-16 transition-colors ${activeTab === 'illustrations' ? 'text-yellow-600' : 'text-gray-400'}`}
                >
                  <ImageIcon size={22} />
                  <span className="text-[10px] font-bold">è¡Œç¨‹æ’åœ–</span>
                </button>

                {/* Floating Action Button Style Center */}
                <div className="relative -top-6">
                  <button 
                     className="w-14 h-14 bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-full shadow-xl flex items-center justify-center text-white border-4 border-gray-50 transform active:scale-95 transition-transform"
                     onClick={() => {
                        setActiveTab('timeline');
                        setCurrentDay(1); // Reset to day 1 or current real date logic
                     }}
                  >
                     <Plane size={24} />
                  </button>
                </div>

                <button 
                  onClick={() => setActiveTab('souvenirs')}
                  className={`flex flex-col items-center gap-1 w-16 transition-colors ${activeTab === 'souvenirs' ? 'text-yellow-600' : 'text-gray-400'}`}
                >
                  <ShoppingBag size={22} />
                  <span className="text-[10px] font-bold">ä¼´æ‰‹ç¦®</span>
                </button>

                <button 
                  onClick={() => setActiveTab('map')}
                  className={`flex flex-col items-center gap-1 w-16 transition-colors ${activeTab === 'map' ? 'text-yellow-600' : 'text-gray-400'}`}
                >
                  <MapIcon size={22} />
                  <span className="text-[10px] font-bold">ç¸½è¦½åœ°åœ–</span>
                </button>
              </div>

              {/* Modals */}
              <Modal 
                isOpen={!!modalData} 
                data={modalData} 
                onClose={() => setModalData(null)} 
              />
              
              <TipsModal 
                isOpen={isTipsOpen} 
                onClose={() => setIsTipsOpen(false)} 
              />
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<EgyptApp />);
    </script>
</body>
</html>
